<%= render "govuk_publishing_components/components/heading", {
  text: "Pages",
  heading_level: 2,
  font_size: "l",
  margin_bottom: 2,
} %>

<% @edition.worldwide_organisation_pages.each do |page| %>
  <%= form.fields_for :worldwide_organisation_pages, page do |pages_form| %>
    <%= render partial: "admin/editionable_worldwide_organisations/page", locals: { page: page, form: pages_form } %>
  <% end %>
<% end %>

<%= form.fields_for :worldwide_organisation_pages, WorldwideOrganisationPage.new do |pages_form| %>
    <%= render "components/select_with_search", {
      id: "edition_corporate_information_page_type_id",
      name: pages_form.field_name(:corporate_information_page_type_id),
      label: "Type",
      heading_size: "l",
      error_message: errors_for_input(@edition.errors, :corporate_information_page_type_id),
      include_blank: true,
      options: corporate_information_page_types(@organisation).map do |type, value|
        {
          text: type,
          value: value,
        }
      end,
    } %>

  <%= render "govuk_publishing_components/components/textarea", {
    label: {
      text: "Body",
    },
    name: pages_form.field_name(:body)
  } %>

  <%= render "govuk_publishing_components/components/textarea", {
    label: {
      text: "Summary",
    },
    name: pages_form.field_name(:summary)
  } %>
<% end %>
