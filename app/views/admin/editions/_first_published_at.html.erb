<% first_published_at_fields = render("components/datetime_fields", {
      heading_size: "s",
      field_name: "first_published_at",
      prefix: "edition",
      date_hint: "For example, 01 08 2022",
      time_hint: "For example, 09:30 or 19:30",
      error_items: errors_for(edition.errors, :first_published_at),
      id: "edition_first_published_at_1i",
      year: {
        id: "edition_first_published_at_1i",
        value: params.dig("edition", "first_published_at(1i)") || edition.first_published_at&.year,
        name: "edition[first_published_at(1i)]",
        label: "Year",
        width: 4,
      },
      month: {
        id: "edition_first_published_at_2i",
        value: params.dig("edition", "first_published_at(2i)") || edition.first_published_at&.month,
        name: "edition[first_published_at(2i)]",
        label: "Month",
        width: 2,
      },
      day: {
        id: "edition_first_published_at_3i",
        value: params.dig("edition", "first_published_at(3i)") || edition.first_published_at&.day,
        name: "edition[first_published_at(3i)]",
        label: "Day",
        width: 2,
      },
      hour: {
        value: params.dig("edition", "first_published_at(4i)")&.to_i || edition.first_published_at&.hour,
        id: "edition_first_published_at_4i",
      },
      minute: {
        value: params.dig("edition", "first_published_at(5i)")&.to_i || edition.first_published_at&.min,
        id: "edition_first_published_at_5i",
      },
    }) %>

<% if edition.published_major_version.nil? %>
  <div>
    <%= render "govuk_publishing_components/components/fieldset", {
      legend_text: "Document status (required)",
      heading_size: "m",
      id: "edition_first_published_at",
    } do %>
      <%= render "govuk_publishing_components/components/radio", {
        name: "edition[previously_published]",
        id: "edition_previously_published",
        error_items: errors_for(edition.errors, :previously_published),
        items: [
          {
            value: false,
            text: "This document has never been published before.",
            checked: params.dig("edition", "previously_published") == "false" || edition.previously_published == false,
          },
          {
            value: true,
            text: "This document has previously been published on another website.",
            checked: params.dig("edition", "previously_published") == "true" || edition.previously_published == true,
            conditional: first_published_at_fields,
          },
        ],
      } %>
  </div>
  <% end %>
<% else %>
  <div>
    <%= render "govuk_publishing_components/components/fieldset", {
      legend_text: "First published",
      heading_size: "m",
      hint: "For example, 31 3 2000",
      id: "edition_first_published_at",
      error_message: errors_for_input(edition.errors, :first_published_at),
    } do %>
      <%= first_published_at_fields %>
    <% end %>
  </div>
<% end %>
